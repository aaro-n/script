></script>
<!-- END WAYBACK TOOLBAR INSERT -->
 
<svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-dark-grayscale"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "/><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 0.49803921568627"/><fefuncg type="table" tablevalues="0 0.49803921568627"/><fefuncb type="table" tablevalues="0 0.49803921568627"/><fefunca type="table" tablevalues="1 1"/></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"/></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-grayscale"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "/><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 1"/><fefuncg type="table" tablevalues="0 1"/><fefuncb type="table" tablevalues="0 1"/><fefunca type="table" tablevalues="1 1"/></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"/></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-yellow"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "/><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.54901960784314 0.98823529411765"/><fefuncg type="table" tablevalues="0 1"/><fefuncb type="table" tablevalues="0.71764705882353 0.25490196078431"/><fefunca type="table" tablevalues="1 1"/></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"/></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-red"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "/><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 1"/><fefuncg type="table" tablevalues="0 0.27843137254902"/><fefuncb type="table" tablevalues="0.5921568627451 0.27843137254902"/><fefunca type="table" tablevalues="1 1"/></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"/></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-midnight"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "/><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0 0"/><fefuncg type="table" tablevalues="0 0.64705882352941"/><fefuncb type="table" tablevalues="0 1"/><fefunca type="table" tablevalues="1 1"/></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"/></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-magenta-yellow"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "/><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.78039215686275 1"/><fefuncg type="table" tablevalues="0 0.94901960784314"/><fefuncb type="table" tablevalues="0.35294117647059 0.47058823529412"/><fefunca type="table" tablevalues="1 1"/></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"/></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-purple-green"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "/><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.65098039215686 0.40392156862745"/><fefuncg type="table" tablevalues="0 1"/><fefuncb type="table" tablevalues="0.44705882352941 0.4"/><fefunca type="table" tablevalues="1 1"/></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"/></filter></defs></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 0 0" width="0" height="0" focusable="false" role="none" style="visibility: hidden; position: absolute; left: -9999px; overflow: hidden;"><defs><filter id="wp-duotone-blue-orange"><fecolormatrix color-interpolation-filters="sRGB" type="matrix" values=" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 "/><fecomponenttransfer color-interpolation-filters="sRGB"><fefuncr type="table" tablevalues="0.098039215686275 1"/><fefuncg type="table" tablevalues="0 0.66274509803922"/><fefuncb type="table" tablevalues="0.84705882352941 0.41960784313725"/><fefunca type="table" tablevalues="1 1"/></fecomponenttransfer><fecomposite in2="SourceGraphic" operator="in"/></filter></defs></svg>			<header class="site-header clear">
<div class="site-branding"> <p class="site-title"> <a href="https://web.archive.org/web/20230325202317/https://www.itansuo.info/" rel="home"> 探索 </a> </p></div><nav id="site-navigation" class="menu-1">
<div class="menu-%e9%bb%98%e8%ae%a4%e8%ae%be%e7%bd%ae-container"><ul id="site-menu" class="menu"><li id="menu-item-69" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-69"><a href="https://web.archive.org/web/20230325202317/https://www.itansuo.info/about">关于</a></li> <li id="menu-item-729" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-729"><a href="https://web.archive.org/web/20230325202317/https://www.itansuo.info/message">留言板</a></li> <li id="menu-item-70" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-70"><a href="https://web.archive.org/web/20230325202317/https://itansuo.info/">导航</a></li> <li id="menu-item-407" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-407"><a target="_blank" rel="noopener" href="https://web.archive.org/web/20230325202317/https://tg.ip94.cn/share/vIVOLBAC/%E5%8D%9A%E5%AE%A2">访问统计</a></li> <li id="menu-item-408" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-408"><a href="https://web.archive.org/web/20230325202317/https://search.232676.xyz/search?q=site%3Awww.itansuo.info+">搜索</a></li> </ul></div></nav>
</header>
<div class="site-content">
<div id="content-area" class="content-area">
<article class="post-411 post type-post status-publish format-standard hentry category-4 tag-wordpress">
<header class="entry-header">
<h1 class="entry-title">在 Heroku 上安装WordPress</h1>
</header>
<div class="entry-content">
<h2>快速安装</h2>
<p>打开<a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://github.com/aaro-n/heroku-wp" target="_blank">Github库</a>，点击下方的部署按钮，进行部署操作。</p>
<span id="more-411"></span>
<h2>自定义修改</h2>
<h3>修改了那些内容</h3>
<p>在<a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://github.com/xyu/heroku-wp/" target="_blank">原仓库</a>的做了以下修改：</p>
<ul><li>修改数据库证书，原仓库的证书已无法使用。</li><li>删除原仓库的 <a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://github.com/automattic/batcache" target="_blank">Batcache</a> 插件，代替为 <a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://wordpress.org/plugins/wp-fastest-cache/" target="_blank">WP Fastest Cache</a>，并且修改 Nginx 配置文件。</li><li>删除 AWS S3、SendGrid、Jetpack插件</li><li>删除 WordPress 默认安装主题和插件。</li><li>添加两个 Heroku 插件。</li><li>添加我常用的几个插件。</li><li>将 WordPress 安装包代替为中文版。</li></ul>
<h3>更新 WordPress 主程序</h3>
<p><em>需要克隆 Github 库，Heroku要链接这个 Github 库。 </em></p>
<p>首先查询<a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://cn.wordpress.org/download/releases/" target="_blank">最新版 WordPress</a>，修改 <a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://github.com/aaro-n/heroku-wp/blob/master/composer.json" target="_blank">composer.json</a>对应位置，修改版本号和下载地址。</p>
<figure class="wp-block-image size-large"><img decoding="async" src="https://web.archive.org/web/20230325202317im_/https://cf-image.676232.xyz/wp-content/uploads/2020/08/修改版本号-1024x467.png" alt="" class="wp-image-412"/></figure>
<pre class="wp-block-preformatted">执行 <code>composer update</code> ，之后修改同步到 Github。</pre>
<h3>添加插件和主题</h3>
<p>两种方法：</p>
<ol><li>修改 composer.json </li><li>将插件下载到 public/wp-content/plugins/ ，将主题下载到 public/wp-content/themes/ ，之后同步到 Github。</li></ol>
<p><em>如果你要修改插件和主题，要选用第二种方式。</em></p>
<h4>方案 1 安装</h4>
<ul><li>打开<a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://cn.wordpress.org/plugins/" target="_blank">插件</a>网站和 <a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://wpackagist.org/" target="_blank">WordPress Packagist</a>，将插件名在 <a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://wpackagist.org/" target="_blank">WordPress Packagist</a> 搜索，选择对应版本号，将代码复制到对应位置，<em>注意：末尾有个英文状态下的逗号。</em></li></ul>
<figure class="wp-block-image size-large"><img decoding="async" src="https://web.archive.org/web/20230325202317im_/https://cf-image.676232.xyz/wp-content/uploads/2020/08/查找代码-1024x472.png" alt="" class="wp-image-413"/><figcaption>输入插件和主题名称</figcaption></figure>
<figure class="wp-block-image size-large"><img decoding="async" src="https://web.archive.org/web/20230325202317im_/https://cf-image.676232.xyz/wp-content/uploads/2020/08/插件主题搜索-1024x406.png" alt="" class="wp-image-414"/><figcaption>复制代码</figcaption></figure>
<figure class="wp-block-image size-large"><img decoding="async" src="https://web.archive.org/web/20230325202317im_/https://cf-image.676232.xyz/wp-content/uploads/2020/08/添加到配置文件-1024x849.png" alt="" class="wp-image-415"/><figcaption>要添加到对应位置，还要注意最后的英文逗点。</figcaption></figure>
<ul><li>执行 <code>composer update</code> ，同步到 Github。</li></ul>
<h3>删除默认主题和插件</h3>
<p>修改 <code>support/app_slug_compile.sh</code> ，主要添加以下代码：</p>
<pre class="wp-block-code"><code>rm -rf public.built/wp-content/plugins/akismet
rm -rf public.built/wp-content/plugins/hello-dol*

rm -rf public.built/wp-content/themes/twentyseventeen
rm -rf public.built/wp-content/themes/twentynineteen</code></pre>
<p>之后同步到Github。</p>
<p>在 Heroku 上重新部署</p>
<p><a rel="noreferrer noopener" href="https://web.archive.org/web/20230325202317/https://wb.itansuo.info/" target="_blank">博客</a> <a href="https://web.archive.org/web/20230325202317/https://github.com/aaro-n/heroku-wp" target="_blank" rel="noreferrer noopener">GitHub 库</a></p></div></article>
<link href="//web.archive.org/web/20230325202317cs_/https://js.its2.fun/artalk/ArtalkLite.css" rel="stylesheet">
<div id="Comments"></div></div></div><script src="//web.archive.org/web/20230325202317js_/https://js.its2.fun/artalk/ArtalkLite.js"></script>
<script>new Artalk({
el:         '#Comments',
pageKey:     'https://web.archive.org/web/20230325202317/https://www.itansuo.info/411',
pageTitle:    '在 Heroku 上安装WordPress',
server:      'https://web.archive.org/web/20230325202317/https://talk.itansuo.info',
site:        '探索',
placeholder: '如果感觉对你有帮助，欢迎留言。\n评论注意事项：不欢迎垃圾、仇恨及其他令人感到不适的评论。\n隐私声明：发表评论后台会记录评论者的IP，请注意。',
useBackendConf: false,
flatMode: false,
imgUpload: false,
gravatar: {
default: 'mp',
mirror: 'https://web.archive.org/web/20230325202317/https://dn-qiniu-avatar.qbox.me/avatar/',
},
})</script>
